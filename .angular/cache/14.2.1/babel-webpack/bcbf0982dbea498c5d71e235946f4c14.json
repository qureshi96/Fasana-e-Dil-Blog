{"ast":null,"code":"import _asyncToGenerator from \"/Users/usman/Documents/GitHub/Fasana-e-Dil-Blog/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { getAuth, signInWithPopup, GoogleAuthProvider, signOut, onAuthStateChanged } from 'firebase/auth';\nimport { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/fire/compat/auth\";\nexport class UserAuthService {\n  constructor(auth) {\n    this.auth = auth;\n    this.user = new BehaviorSubject(null);\n    this.initAuthListener();\n  }\n\n  googleSignIn() {\n    return _asyncToGenerator(function* () {\n      const provider = new GoogleAuthProvider();\n\n      try {\n        const result = yield signInWithPopup(getAuth(), provider); // Use result.user here\n\n        return result;\n      } catch (error) {\n        console.error(error); // Handle errors here\n      }\n    })();\n  }\n\n  logout() {\n    return _asyncToGenerator(function* () {\n      try {\n        yield signOut(getAuth());\n        console.log(\"signed out\");\n      } catch (error) {\n        console.error(\"failed\", error);\n      }\n    })();\n  }\n\n  initAuthListener() {\n    const auth = getAuth();\n    onAuthStateChanged(auth, user => {\n      if (user) {\n        this.user.next(user);\n      } else {\n        this.user.next(null);\n      }\n    });\n  }\n\n  getUser() {\n    return this.user.asObservable();\n  }\n\n}\n\nUserAuthService.ɵfac = function UserAuthService_Factory(t) {\n  return new (t || UserAuthService)(i0.ɵɵinject(i1.AngularFireAuth));\n};\n\nUserAuthService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: UserAuthService,\n  factory: UserAuthService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":";AACA,SAASA,OAAT,EAAkBC,eAAlB,EAAmCC,kBAAnC,EAAuDC,OAAvD,EAAgEC,kBAAhE,QAA0F,eAA1F;AAEA,SAASC,eAAT,QAAgC,MAAhC;;;AAIA,OAAM,MAAOC,eAAP,CAAsB;EAG1BC,YAAoBC,IAApB,EAAyC;IAArB;IAFZ,YAAO,IAAIH,eAAJ,CAAoB,IAApB,CAAP;IAGN,KAAKI,gBAAL;EACD;;EAEKC,YAAY;IAAA;MAChB,MAAMC,QAAQ,GAAG,IAAIT,kBAAJ,EAAjB;;MACA,IAAI;QACF,MAAMU,MAAM,SAASX,eAAe,CAACD,OAAO,EAAR,EAAYW,QAAZ,CAApC,CADE,CAEF;;QACA,OAAOC,MAAP;MACD,CAJD,CAIE,OAAOC,KAAP,EAAc;QACdC,OAAO,CAACD,KAAR,CAAcA,KAAd,EADc,CAEd;MACD;IATe;EAUjB;;EAEKE,MAAM;IAAA;MACV,IAAG;QACD,MAAMZ,OAAO,CAACH,OAAO,EAAR,CAAb;QACCc,OAAO,CAACE,GAAR,CAAY,YAAZ;MACF,CAHD,CAIA,OAAMH,KAAN,EAAY;QACVC,OAAO,CAACD,KAAR,CAAc,QAAd,EAAuBA,KAAvB;MACD;IAPS;EAQX;;EAEOJ,gBAAgB;IACtB,MAAMD,IAAI,GAAGR,OAAO,EAApB;IACAI,kBAAkB,CAACI,IAAD,EAAQS,IAAD,IAAS;MAC9B,IAAGA,IAAH,EAAQ;QACN,KAAKA,IAAL,CAAUC,IAAV,CAAeD,IAAf;MACD,CAFD,MAGI;QACF,KAAKA,IAAL,CAAUC,IAAV,CAAe,IAAf;MACD;IACJ,CAPiB,CAAlB;EASD;;EACDC,OAAO;IACL,OAAO,KAAKF,IAAL,CAAUG,YAAV,EAAP;EACD;;AA3CyB;;;mBAAfd,iBAAee;AAAA;;;SAAff;EAAegB,SAAfhB,eAAe;EAAAiB,YAFd","names":["getAuth","signInWithPopup","GoogleAuthProvider","signOut","onAuthStateChanged","BehaviorSubject","UserAuthService","constructor","auth","initAuthListener","googleSignIn","provider","result","error","console","logout","log","user","next","getUser","asObservable","i0","factory","providedIn"],"sourceRoot":"","sources":["/Users/usman/Documents/GitHub/Fasana-e-Dil-Blog/src/app/user-auth.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { getAuth, signInWithPopup, GoogleAuthProvider, signOut, onAuthStateChanged } from 'firebase/auth';\nimport { AngularFireAuth } from '@angular/fire/compat/auth';\nimport { BehaviorSubject } from 'rxjs';\n@Injectable({\n  providedIn: 'root'\n})\nexport class UserAuthService {\n  private user = new BehaviorSubject(null);\n\n  constructor(private auth: AngularFireAuth) { \n    this.initAuthListener();\n  }\n\n  async googleSignIn() {\n    const provider = new GoogleAuthProvider();\n    try {\n      const result = await signInWithPopup(getAuth(), provider);\n      // Use result.user here\n      return result;\n    } catch (error) {\n      console.error(error);\n      // Handle errors here\n    }\n  }\n\n  async logout(){\n    try{\n      await signOut(getAuth());\n       console.log(\"signed out\");\n    }\n    catch(error){\n      console.error(\"failed\",error);\n    }\n  }\n\n  private initAuthListener(){\n    const auth = getAuth();\n    onAuthStateChanged(auth, (user) =>{\n        if(user){\n          this.user.next(user);\n        }\n        else{\n          this.user.next(null);\n        }\n    });\n\n  }\n  getUser(){\n    return this.user.asObservable();\n  }\n\n}\n"]},"metadata":{},"sourceType":"module"}